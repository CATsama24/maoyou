# 🎬 序列帧动画使用说明

## 功能概述

游戏现在支持从一张PNG图片中自动提取序列帧并制作成动画！

## 📁 文件命名规则

### 四向序列帧动画
将你的序列帧图片按照以下格式命名：
```
player_[状态]_[方向].png
```

例如：
- `player_idle_down.png` - 朝下待机动画
- `player_move_up.png` - 朝上移动动画
- `player_attack1_left.png` - 朝左攻击动画

### 无方向序列帧动画
```
player_[状态].png
```

例如：
- `player_idle.png` - 待机动画
- `player_move.png` - 移动动画
- `player_attack1.png` - 攻击动画

## 🎨 图片要求

1. **水平排列**：所有帧必须水平排列在一张图片中
2. **等宽**：每帧的宽度必须相等
3. **等高**：所有帧的高度必须相同
4. **格式**：PNG格式，支持透明背景

## ⚙️ 配置选项

在 `js/gameConfig.js` 中可以调整序列帧设置：

```javascript
player: {
    // ... 其他设置
    
    spriteSheet: {
        // 手动指定序列帧数量
        frameCounts: {
            'idle': 8,      // 待机动画帧数
            'move': 8,      // 移动动画帧数
            'attack1': 8,   // 攻击动画1帧数
            'attack2': 8,   // 攻击动画2帧数
            'hit': 4,       // 受伤动画帧数
            'death': 7,     // 死亡动画帧数
            'dash': 7       // 冲刺动画帧数
        },
        // 是否启用自动检测帧数
        autoDetectFrames: true,
        // 攻击动画交替设置
        attackVariants: ['attack1', 'attack2'], // 可用的攻击动画变体
        attackAlternate: true // 是否启用攻击动画交替
    }
}
```

## 🔧 自动检测原理

系统会根据以下规则自动检测帧数：

1. **优先使用配置**：如果配置中指定了帧数，直接使用
2. **自动计算**：根据图片宽度和高度比例计算
3. **状态估算**：根据动画状态估算最小帧数
4. **安全限制**：最大帧数限制为8帧

## 📊 帧率设置

不同状态的动画有不同的帧率：

- **待机 (idle)**: 8 FPS
- **移动 (move)**: 12 FPS
- **攻击 (attack)**: 15 FPS
- **受伤 (hit)**: 10 FPS
- **死亡 (death)**: 8 FPS
- **冲刺 (dash)**: 20 FPS

## 🎯 使用示例

### 示例1：创建移动动画
1. 准备8帧移动动画，水平排列在一张图片中
2. 保存为 `player_move_down.png`
3. 在配置中设置 `'move': 8`
4. 游戏会自动创建移动动画

### 示例2：创建攻击动画交替
1. 准备两个攻击动画：
   - `player_attack1_down.png` - 8帧攻击动画1
   - `player_attack2_down.png` - 8帧攻击动画2
2. 在配置中设置：
   ```javascript
   frameCounts: {
       'attack1': 8,   // 攻击动画1帧数
       'attack2': 8    // 攻击动画2帧数
   },
   attackVariants: ['attack1', 'attack2'],
   attackAlternate: true
   ```
3. 游戏会自动交替播放两个攻击动画

### 示例3：四向攻击动画
1. 为每个方向创建攻击动画：
   - `player_attack1_up.png`
   - `player_attack1_down.png`
   - `player_attack1_left.png`
   - `player_attack1_right.png`
   - `player_attack2_up.png`
   - `player_attack2_down.png`
   - `player_attack2_left.png`
   - `player_attack2_right.png`
2. 游戏会根据玩家朝向和攻击次数交替播放动画

## 🐛 故障排除

### 动画不播放
1. 检查文件名是否正确
2. 检查图片格式是否为PNG
3. 检查帧数配置是否正确

### 动画播放太快/太慢
1. 调整配置中的帧率设置
2. 修改 `getFrameRateForState` 函数

### 动画帧数不正确
1. 在配置中手动指定正确的帧数
2. 检查图片中每帧的宽度是否相等

## 💡 提示

1. **测试建议**：先用少量帧数测试，确认效果后再添加更多帧
2. **性能优化**：避免使用过多帧数，建议不超过8帧
3. **文件大小**：序列帧图片可能较大，注意文件大小
4. **兼容性**：系统会自动回退到单帧动画，确保游戏正常运行

---

现在你可以上传序列帧图片，游戏会自动识别并创建动画！
